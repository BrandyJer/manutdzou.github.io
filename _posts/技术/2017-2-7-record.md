---
layout: post
title: 使用记录
category: 技术
tags: 搭建环境
keywords: ubuntu
description:
---

# 服务器免密码登陆

首先本地和服务器端安装ssh
ssh-keygen在本地./ssh生成私钥和公钥
ssh-copy-id -i name.pub usr@ip将本地公钥拷贝到服务器端的.ssh里生成authorized_keys
至此实现了本地连服务器的免密码登陆

# ubuntu 截图 ctrl+alt+a

打开系统设置/键盘/Shortcuts/ 添加“截图” command gnome-screenshot -a 然后选中截图 按下ctrl+alt+a

# 清理ubuntu中孤立无用的软件包

安装Deborphan
sudo apt-get install deborphan
运行
deborphan
列出无用可删除的软件包
sudo orphaner

# ubuntu设代理

在bashrc或者profile中添加

```
export http_proxy="http://z00b04142:z0xx6y2rn@proxy.ricoh.co.jp:8080/"
export https_proxy="https://z00b04142:z0xx6y2rn@proxy.ricoh.co.jp:8080/"
export HTTP_PROXY="http://z00b04142:z0xx6y2rn@proxy.ricoh.co.jp:8080/"
export HTTPS_PROXY="https://z00b04142:z0xx6y2rn@proxy.ricoh.co.jp:8080/"
```

/etc/apt/apt.conf添加

```
Acquire::http::proxy "http://z00b04142:z0xx6y2rn@proxy.ricoh.co.jp:8080/";
Acquire::https::proxy "https://z00b04142:z0xx6y2rn@proxy.ricoh.co.jp:8080/";
Acquire::ftp::proxy "ftp://z00b04142:z0xx6y2rn@proxy.ricoh.co.jp:8080/";
Acquire::socks::proxy "socks://z00b04142:z0xx6y2rn@proxy.ricoh.co.jp:8080/";
```

# ubuntu下cuda7.5升级为cuda8
由于原来版本显卡驱动不支持cuda8需要先卸载原有显卡驱动

关闭桌面显示
sudo service lightdm stop
卸载显卡驱动
sudo apt-get remove --purge nvidia-*
安装cuda8包括里面的显卡驱动
开启桌面显示
sudo service lightdm start

# ubuntu远程拷贝文件和文件夹示例

```
scp myusername@university_computer:/home/myusername/file.odt homeusername@Felix:Desktop/file.odt
sudo scp -r /home/dlg/ssd_caffe bsl@172.25.85.12:/home/bsl
```

# 防止远程Linux主机自动断开SSH连接

我在使用ssh连接远程Linux主机时，如果长时间不操作，ssh会自动断开，只能重新登陆。

原因是：由于ssh的安全机制，如果10分钟没有任何操作，本次SSH会话会自动关闭。 

怎么防止远程Linux自动断开SSH连接

下面的操作是在本地ssh客户端上，不是远程主机。

编辑SSH配置文件：

```
vim ~/.ssh/config    # 当前登陆用户生效
```

添加：

```
Host *
 ServerAliveInterval 30
```

*号代表所有主机，你可以指定某个主机，如：

```
Host server1
 ServerAliveInterval 30
```

ServerAliveInterval 30表示ssh客户端每隔30秒给远程主机发送一个no-op包，no-op是无任何操作的意思，这样远程主机就不会关闭这个SSH会话。

为了使所有用户生效，你可以在/etc/ssh/ssh_config全局配置文件添加如下一行：

```	
ServerAliveInterval 30
```

还可以在连接时使用选项：

```
ssh -o ServerAliveInterval=30 user@remote-ssh-server-ip
```
